(()=>{"use strict";JSON.parse(localStorage.getItem("storedToDos")||"[]");const e=[],t=[];let n=0;const o=o=>{t.push((t=>{const o=n;return n++,{getID:()=>o,getName:()=>t,changeName:e=>t=e,projectToDos:()=>e.filter((e=>e.getProjectID()==o))}})(o)),window.localStorage.setItem("projects",JSON.stringify(t))},d=e=>{const t=document.getElementById(e);document.getElementById(e).style.display="flex",setTimeout((function(){t.style.transition="opacity 0.5s ease",t.style.opacity=1}),500)},c=e=>{const t=document.getElementById(e);t.style.transition="opacity 0.3s ease",t.style.opacity=0,setTimeout((function(){document.getElementById(e).style.display="none"}),500)},a=()=>{document.getElementById("name").value="",document.getElementById("date").value="",document.getElementById("description").value="",document.getElementById("priority").value="",document.getElementById("projectID").value=""},i=(e,t,n)=>{t?e.style.backgroundColor="rgb(108, 255, 79)":t||(e.style.backgroundColor=(e=>{let t;switch(e){case"low":t="rgb(245, 221, 66)";break;case"mid":t="rgb(245, 164, 66)";break;case"high":t="rgb(245, 87, 66)"}return t})(n.getPriority()))},l=n=>{const o=(n=>{const o=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div"),p=document.createElement("label"),y=document.createElement("input"),g=document.createElement("span"),E=document.createElement("button"),h=document.createElement("button");return y.type="checkbox",o.dataset.todoid=n.getProjectID(),d.textContent=n.getName(),c.textContent=n.getDate(),a.textContent=n.getDescription(),l.textContent=t.filter((e=>e.getID()==n.getProjectID()))[0].getName(),o.style.backgroundColor=i(o,n.getCheckState(),n),y.checked=n.getCheckState(),a.style.display="none",E.textContent="+ info",h.textContent="X",p.append(y,g),o.append(d,c,l,p,E,a,h),p.classList.add("switch"),g.classList.add("slider","sliderRound"),o.classList.add("defaultDisplay"),a.classList.add("description"),y.addEventListener("change",(()=>{n.check(),i(o,n.getCheckState(),n)})),E.addEventListener("click",(e=>{m(e.target.parentNode),s(e.target.parentNode),u(E)})),h.addEventListener("click",(()=>{var t;t=e.indexOf(n),e.splice(t,1),window.localStorage.setItem("storedToDos",JSON.stringify(e)),r(o)})),o})(n);o.style.opacity=0,document.getElementById("todosList").appendChild(o),setTimeout((function(){o.style.opacity=1}))},r=e=>{e.style.opacity=0,setTimeout((function(){e.parentNode.removeChild(e)}),500)},m=e=>{e.classList.toggle("defaultDisplay"),e.classList.toggle("detailDisplay")},s=(e,t)=>{e.classList.contains("defaultDisplay")?e.childNodes[5].style.display="none":e.childNodes[5].style.display="block"},u=e=>{"+ info"==e.textContent?e.textContent="- info":"- info"==e.textContent&&(e.textContent="+ info")},p=()=>{const e=document.getElementById("projectID").options[document.getElementById("projectID").selectedIndex].dataset.projectID,t=document.querySelector(`div[data-projectid = "${e}"]`).childNodes[1];0==t.checked&&(t.checked=!0)},y=e=>{const n=document.createElement("div"),o=document.createElement("div"),d=document.createElement("input"),c=document.createElement("button");n.dataset.projectid=e.getID(),d.type="checkbox",o.textContent=e.getName(),c.textContent="X",o.classList.add("projectName"),n.classList.add("projectDisplay"),d.classList.add("displayCheckbox"),d.addEventListener("change",g.bind(void 0,e,d)),c.addEventListener("click",(()=>{(e=>{e.style.opacity=1,e.style.transition="opacity 0.3s ease",e.style.opacity=0,setTimeout((function(){e.parentNode.removeChild(e)}),500)})(n),(e=>{const n=t.indexOf(e);t.splice(n,1),window.localStorage.setItem("projects",JSON.stringify(t))})(e),(e=>{let t=0;for(;t<e.length;)r(e[t]),t++})(document.querySelectorAll(`div[data-todoid = "${e.getID()}"]`))})),n.append(o,d,c),document.getElementById("projectsList").appendChild(n)},g=(e,t)=>{const n=e.projectToDos(),o=e.getID(),d=t.checked;E(n,d,o)},E=(e,t,n)=>{if(t)e.forEach((e=>{l(e)}));else if(!t){const e=document.querySelectorAll(`div[data-todoid = "${n}"]`);let t=0;for(;t<e.length;)r(e[t]),t++}},h=()=>{document.getElementById("content").classList.toggle("blurred")};(()=>{const n=document.createElement("header"),i=document.createElement("main"),r=document.createElement("nav"),m=document.createElement("h1"),s=document.createElement("button"),u=document.createElement("div"),E=document.createElement("div"),v=document.createElement("div"),I=document.createElement("button"),D=document.createElement("footer"),f=document.createElement("div"),C=document.createElement("a");i.id="mainContent",n.id="banner",r.id="projectsMenu",u.id="projectsList",s.id="newProject",E.id="todosView",v.id="todosList",I.id="addNew",D.id="footer",n.textContent="todoList",s.textContent="New project",f.textContent="Made by ",C.textContent="fl-martin",C.href="https://github.com/fl-martin",r.append(m,u,s),E.append(v,I),i.append(r,E),f.appendChild(C),D.appendChild(f),I.appendChild(document.getElementById("plus")),document.getElementById("content").append(n,i,D),document.querySelector("body").append((()=>{const t=document.createElement("form"),n=document.createElement("input"),o=document.createElement("input"),d=document.createElement("input"),i=document.createElement("div"),r=document.createElement("input"),m=document.createElement("label"),s=document.createElement("input"),u=document.createElement("label"),y=document.createElement("input"),g=document.createElement("label"),E=document.createElement("select"),v=document.createElement("button"),I=document.createElement("button");return o.type="date",r.type="radio",s.type="radio",y.type="radio",r.name="priority",s.name="priority",y.name="priority",r.value="low",s.value="mid",y.value="high",m.htmlFor="lowPriority",m.textContent="Want",u.htmlFor="midPriority",u.textContent="Have",g.htmlFor="highPriority",g.textContent="Must",n.placeholder="Title",d.placeholder="Description",E.placeholder="Project",v.textContent="Add",I.textContent="X",i.append(r,m,s,u,y,g),t.append(n,o,d,i,E,v,I),t.id="form",n.id="name",o.id="date",d.id="description",i.id="priority",r.id="lowPriority",s.id="midPriority",y.id="highPriority",E.id="projectID",v.id="addToDo",I.id="closeForm",v.type="button",I.type="button",v.addEventListener("click",(()=>{""!==n.value&&""!==o.value&&""!==t.elements.priority.value&&""!==E.value?((()=>{const t=document.getElementById("name").value,n=document.getElementById("date").value,o=document.getElementById("description").value,d=document.getElementById("form").elements.priority.value,c=document.getElementById("projectID").options[document.getElementById("projectID").selectedIndex].dataset.projectID;e.push(((e,t,n,o,d)=>{let c=!1;return{getName:()=>e,changeName:t=>e=t,getDate:()=>t,changeDate:e=>t=e,getDescription:()=>""!=n?n:""==n?"No description included":void 0,changeDescription:t=>e=t,getPriority:()=>o,getProjectID:()=>d,changeProjectID:e=>d=e,changePriority:e=>o=e,getCheckState:()=>c,check:()=>c=!c}})(t,n,o,d,c)),window.localStorage.setItem("storedToDos",JSON.stringify(e))})(),p(),l(e[e.length-1]),h(),c("form"),a()):""!=n.value&&""!=o.value&&null!=i.value&&""!=E.value||alert("Looks like your new Todo it's incomplete : o")})),I.addEventListener("click",(()=>{c("form"),a(),h()})),t})(),(()=>{const e=document.createElement("div"),n=document.createElement("div"),d=document.createElement("input"),a=document.createElement("button"),i=document.createElement("button");return d.placeholder="Name",a.textContent="Create",i.textContent="X",e.append(n,d,a,i),e.id="projectForm",a.addEventListener("click",(()=>{""!==d.value?(o(d.value),y(t[t.length-1]),c("projectForm"),d.value="",h(),(()=>{for(let e=0;e<t.length;e++){const n=t[e],o=t[e].getID(),d=document.querySelector(`div[data-projectid = "${o}"]`).childNodes[1];g(n,d)}})()):""==d.value&&alert("Your new project needs a name : )")})),i.addEventListener("click",(()=>{h(),c("projectForm")})),e})()),s.addEventListener("click",(()=>{h(),c("form"),d("projectForm")})),I.addEventListener("click",(()=>{(()=>{document.getElementById("projectID").options.length=t.length;for(let e=0;e<t.length;e++)document.getElementById("projectID").options[e].textContent=t[e].getName(),document.getElementById("projectID").options[e].dataset.projectID=t[e].getID()})(),h(),c("projectForm"),d("form")}))})(),o("myList"),y(t[t.length-1])})();